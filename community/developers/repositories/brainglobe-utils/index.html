
<!DOCTYPE html>


<html lang="en" data-content_root="../../../../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>brainglobe-utils &#8212; BrainGlobe</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../../../_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="../../../../_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../../../../_static/css/custom.css?v=1227d6e8" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- So that users can add custom icons -->
  <script src="../../../../_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../../../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="../../../../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="../../../../_static/documentation_options.js?v=d45e8c67"></script>
    <script src="../../../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../../../_static/copybutton.js?v=f281be69"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../../../_static/togglebutton.js?v=4a39c7ea"></script>
    <script src="../../../../_static/design-tabs.js?v=f930bc37"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'community/developers/repositories/brainglobe-utils/index';</script>
    <link rel="canonical" href="https://brainglobe.info/community/developers/repositories/brainglobe-utils/index.html" />
    <link rel="icon" href="../../../../_static/brainglobe.png"/>
    <link rel="author" title="About these documents" href="../../../../about.html" />
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <link rel="next" title="brainglobe-workflows" href="../brainglobe-workflows/index.html" />
    <link rel="prev" title="brainglobe-meta" href="../brainglobe-meta/index.html" /> 
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="" />   
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../../../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="../../../../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../../../../_static/brainglobe.png" class="logo__image only-light" alt=""/>
    <img src="../../../../_static/brainglobe.png" class="logo__image only-dark pst-js-only" alt=""/>
  
  
    <p class="title logo__title">BrainGlobe</p>
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../../../about.html">
    About
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../../../tutorials/index.html">
    Tutorials
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../../../documentation/index.html">
    Documentation
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="../../../index.html">
    Community
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../../../blog/index.html">
    Blog
  </a>
</li>

  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
        </div>
      
      
        <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/brainglobe" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://twitter.com/brain_globe" title="Twitter" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-twitter fa-lg" aria-hidden="true"></i>
            <span class="sr-only">Twitter</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://mastodon.online/@brainglobe" title="Mastodon" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-mastodon fa-lg" aria-hidden="true"></i>
            <span class="sr-only">Mastodon</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://bsky.app/profile/brainglobe.info" title="Bluesky" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-bluesky fa-lg" aria-hidden="true"></i>
            <span class="sr-only">Bluesky</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://brainglobe.zulipchat.com" title="Zulip (Developer chat)" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-solid fa-comments fa-lg" aria-hidden="true"></i>
            <span class="sr-only">Zulip (Developer chat)</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://forum.image.sc/tag/brainglobe" title="image.sc (Help forum)" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-solid fa-question fa-lg" aria-hidden="true"></i>
            <span class="sr-only">image.sc (Help forum)</span></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
    </div>
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../../../about.html">
    About
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../../../tutorials/index.html">
    Tutorials
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../../../documentation/index.html">
    Documentation
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="../../../index.html">
    Community
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../../../blog/index.html">
    Blog
  </a>
</li>

  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/brainglobe" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://twitter.com/brain_globe" title="Twitter" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-twitter fa-lg" aria-hidden="true"></i>
            <span class="sr-only">Twitter</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://mastodon.online/@brainglobe" title="Mastodon" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-mastodon fa-lg" aria-hidden="true"></i>
            <span class="sr-only">Mastodon</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://bsky.app/profile/brainglobe.info" title="Bluesky" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-bluesky fa-lg" aria-hidden="true"></i>
            <span class="sr-only">Bluesky</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://brainglobe.zulipchat.com" title="Zulip (Developer chat)" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-solid fa-comments fa-lg" aria-hidden="true"></i>
            <span class="sr-only">Zulip (Developer chat)</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://forum.image.sc/tag/brainglobe" title="image.sc (Help forum)" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-solid fa-question fa-lg" aria-hidden="true"></i>
            <span class="sr-only">image.sc (Help forum)</span></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><ul class="current nav bd-sidenav">
<li class="toctree-l1 current active has-children"><a class="reference internal" href="../../index.html">Developer’s guide</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../intro_to_codebase.html">Introduction to the BrainGlobe codebase for developers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tooling.html">Tooling</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../conventions.html">Conventions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../testing.html">Testing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../new_releases.html">Publishing new releases</a></li>
<li class="toctree-l2 current active has-children"><a class="reference internal" href="../../specific_repos.html">Specific Repository Developer Documentation</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../brainglobe-atlasapi/index.html">brainglobe-atlasapi</a></li>
<li class="toctree-l3"><a class="reference internal" href="../brainglobe-meta/index.html">brainglobe-meta</a></li>
<li class="toctree-l3 current active"><a class="current reference internal" href="#">brainglobe-utils</a></li>
<li class="toctree-l3"><a class="reference internal" href="../brainglobe-workflows/index.html">brainglobe-workflows</a></li>
<li class="toctree-l3"><a class="reference internal" href="../cellfinder-core/index.html">cellfinder.core</a></li>
</ul>
</details></li>
<li class="toctree-l2"><a class="reference external" href="https://github.com/brainglobe/.github/blob/main/CODE_OF_CONDUCT.md">Code of conduct</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../roadmaps/index.html">Roadmaps</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../roadmaps/may-2024.html">May 2024</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../roadmaps/november-2023.html">November 2023</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../releases/index.html">Releases</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../releases/v1/index.html">BrainGlobe version 1 overview</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../releases/v1/brainreg.html">Version 1: changes to registration and segmentation tools</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../releases/v1/cellfinder-migration.html">Version 1: Cellfinder migration and <code class="docutils literal notranslate"><span class="pre">brainglobe-workflows</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../releases/v1/cellfinder-core-and-plugin-merge.html">Version 1: changes to the cellfinder backend and plugin</a></li>
</ul>
</details></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../courses/index.html">Courses</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../courses/materials/whole-brain-analysis/index.html">Whole brain microscopy analysis with BrainGlobe and napari</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../courses/scheduled/oct-2024/index.html">October 7th-8th 2024</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../courses/scheduled/dec-2023/index.html">December 6th 2023</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="../../../external-tools.html">Software built by the community</a></li>
<li class="toctree-l1"><a class="reference external" href="https://gin.g-node.org/BrainGlobe">Sample datasets</a></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">

<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../../../../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="../../../index.html" class="nav-link">Community</a></li>
    
    
    <li class="breadcrumb-item"><a href="../../index.html" class="nav-link">Developer’s guide</a></li>
    
    
    <li class="breadcrumb-item"><a href="../../specific_repos.html" class="nav-link">Specific Repository Developer Documentation</a></li>
    
    <li class="breadcrumb-item active" aria-current="page"><span class="ellipsis">brainglobe-utils</span></li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                   <section class="tex2jax_ignore mathjax_ignore" id="brainglobe-utils">
<h1>brainglobe-utils<a class="headerlink" href="#brainglobe-utils" title="Link to this heading">#</a></h1>
<p><code class="docutils literal notranslate"><span class="pre">brainglobe-utils</span></code> is a collection of functions that can be re-used across multiple repositories: for BrainGlobe tools, plugins, or analyses (in the case of <code class="docutils literal notranslate"><span class="pre">brainglobe-workflows</span></code>).
It underpins a number of our user-facing tools like <code class="docutils literal notranslate"><span class="pre">brainreg</span></code> and <code class="docutils literal notranslate"><span class="pre">cellfinder</span></code>, as well as our common interfaces to napari in <code class="docutils literal notranslate"><span class="pre">brainglobe-napari-io</span></code>, for example.
The main feature it provides to users is the <a class="reference internal" href="#cite-brainglobe-and-the-citation-submodule"><span class="std std-ref">cite-brainglobe</span></a> command-line program.</p>
<section id="cite-brainglobe-and-the-citation-submodule">
<h2><code class="docutils literal notranslate"><span class="pre">cite-brainglobe</span></code> and the <code class="docutils literal notranslate"><span class="pre">citation</span></code> submodule<a class="headerlink" href="#cite-brainglobe-and-the-citation-submodule" title="Link to this heading">#</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">cite-brainglobe</span></code> command-line program is provided by the <code class="docutils literal notranslate"><span class="pre">citation</span></code> submodule, with the command-line wrapper and main function themselves being available in <code class="docutils literal notranslate"><span class="pre">citation.cite:cli</span></code> and <code class="docutils literal notranslate"><span class="pre">citation.cite:cite</span></code> respectively.</p>
<p>At the top level, the workflow for the citation tool works as follows:</p>
<ul class="simple">
<li><p>Parse the tool names that the user provides on the command-line. The repositories known to the package, and the names that they use, are defined in the <code class="docutils literal notranslate"><span class="pre">citation.repository</span></code>.</p></li>
<li><p>Fetch the citation data from each <code class="docutils literal notranslate"><span class="pre">repository</span></code> by reading its CITATION.cff file.</p></li>
<li><p>Read the CITATION.cff metadata into the appropriate citation format. This creates an instance of (a subclass of) <code class="docutils literal notranslate"><span class="pre">citation.format:Format</span></code>.</p></li>
<li><p>Invoke the <code class="docutils literal notranslate"><span class="pre">generate_ref_string()</span></code> method of the <code class="docutils literal notranslate"><span class="pre">Format</span></code> instance to obtain the citation string.</p></li>
<li><p>Append the citation string to those already created, and repeat for each tool requested.</p></li>
<li><p>Write the output text to a file, or dump to <code class="docutils literal notranslate"><span class="pre">stdout</span></code> if not provided with an output location.</p></li>
</ul>
<p>The <code class="docutils literal notranslate"><span class="pre">citation</span></code> submodule itself breaks down further to accommodate the steps of the workflow above.</p>
<ul class="simple">
<li><p>As mentioned, the <code class="docutils literal notranslate"><span class="pre">citation.cite</span></code> module contains the high-level command-line interface and backend function.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">citation.fetch</span></code> module contains helper functions for quickly retrieving the files we want from their GitHub repositories.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">citation.repository</span></code> submodule contains the <code class="docutils literal notranslate"><span class="pre">Repository</span></code> class which is a convenient wrapper for storing information about the BrainGlobe tools that we want <code class="docutils literal notranslate"><span class="pre">cite-brainglobe</span></code> to be aware of, and recognise the names of.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">citation.format</span></code> submodule contains the <code class="docutils literal notranslate"><span class="pre">Format</span></code> base class for reading and generating citation strings.</p></li>
<li><p>The additional modules that match <code class="docutils literal notranslate"><span class="pre">citation.*_fmt</span></code> contain classes that derive from <code class="docutils literal notranslate"><span class="pre">Format</span></code>. This allows us to accommodate different citation formats needing different metadata, amongst other things.</p></li>
</ul>
<section id="adding-new-repositories-or-tools">
<h3>Adding new repositories or tools<a class="headerlink" href="#adding-new-repositories-or-tools" title="Link to this heading">#</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">cite-brainglobe</span></code> is only aware of the repositories that we tell it about - and any such repository must have a CITATION.cff (or equivalent metadata file) present in it that we can fetch.</p>
<p>To make <code class="docutils literal notranslate"><span class="pre">cite-brainglobe</span></code> aware of a new BrainGlobe tool, add a static <code class="docutils literal notranslate"><span class="pre">Repository</span></code> instance to the <code class="docutils literal notranslate"><span class="pre">citation.repositories</span></code> submodule as detailed in the <code class="docutils literal notranslate"><span class="pre">citation.repositories</span></code> section, specifying the required information.</p>
</section>
<section id="adding-a-new-supported-citation-format">
<h3>Adding a new supported citation format<a class="headerlink" href="#adding-a-new-supported-citation-format" title="Link to this heading">#</a></h3>
<p>Create a new submodule called <code class="docutils literal notranslate"><span class="pre">new-format_fmt</span></code> in the <code class="docutils literal notranslate"><span class="pre">citation</span></code> submodule.
Then write a class that inherits from <code class="docutils literal notranslate"><span class="pre">citation.format.Format</span></code> and defines the <code class="docutils literal notranslate"><span class="pre">required</span></code> and <code class="docutils literal notranslate"><span class="pre">optional</span></code> keys that your citation type needs from the <code class="docutils literal notranslate"><span class="pre">.cff</span></code> files we read from GitHub.
Finally, in your class you’ll need to overwrite the <code class="docutils literal notranslate"><span class="pre">generate_ref_string</span></code> method to produce the citation string from the metadata information you specified.</p>
<p>Then, head to the <code class="docutils literal notranslate"><span class="pre">citation.cite</span></code> module and add your new format as an option to the command-line interface (<code class="docutils literal notranslate"><span class="pre">citation.cite.cli</span></code>) and backend function (<code class="docutils literal notranslate"><span class="pre">citation.cite.cite</span></code>).</p>
</section>
<section id="citation-repositories">
<h3><code class="docutils literal notranslate"><span class="pre">citation.repositories</span></code><a class="headerlink" href="#citation-repositories" title="Link to this heading">#</a></h3>
<p>This module contains the <code class="docutils literal notranslate"><span class="pre">Repository</span></code> class, a function to find the repositories that are referred to in a list of tool names, and the static instances of all the BrainGlobe repositories that we provide a reference for via <code class="docutils literal notranslate"><span class="pre">cite-brainglobe</span></code>.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">Repository</span></code> class is just a convenient container for all the information pertaining to one particular BrainGlobe tool or repository.
The class itself just holds any information we need and some useful actions on that information, such as providing the URL for the GitHub repo, storing the alternative names for the tool that is held there, etc.
The static instances of this class are instantiated in this module too - by convention, the variable name should match the repository’s name on GitHub.
Each instance is created using the syntax:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">brainglobe_tool</span> <span class="o">=</span> <span class="n">Repository</span><span class="p">(</span><span class="s2">&quot;brainglobe-tool&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;list&quot;</span><span class="p">,</span> <span class="s2">&quot;of&quot;</span><span class="p">,</span> <span class="s2">&quot;alternative&quot;</span><span class="p">,</span> <span class="s2">&quot;or&quot;</span><span class="p">,</span> <span class="s2">&quot;informal&quot;</span><span class="p">,</span> <span class="s2">&quot;names&quot;</span><span class="p">])</span>
</pre></div>
</div>
<p>This defines a repository that <code class="docutils literal notranslate"><span class="pre">cite-brainglobe</span></code> expects to be called <code class="docutils literal notranslate"><span class="pre">bg-tool</span></code>, under the <code class="docutils literal notranslate"><span class="pre">brainglobe</span></code> organisation on GitHub.
It also expects the CITATION.cff file to be on the <code class="docutils literal notranslate"><span class="pre">main</span></code> branch of this repository - though this location (and the organisation if we really need to point to non-BrainGlobe tools) can be changed when calling the constructor.
The second argument defines the (case-insensitive) names (in addition to the repository name itself) that <code class="docutils literal notranslate"><span class="pre">cite-brainglobe</span></code> will match to this repository; some of these names are automatically generated from the repository name, by the following rules:</p>
<ul class="simple">
<li><p>The characters <code class="docutils literal notranslate"><span class="pre">&quot;_&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;-&quot;</span></code>, and <code class="docutils literal notranslate"><span class="pre">&quot;</span> <span class="pre">&quot;</span></code> are considered interchangeable. Providing <code class="docutils literal notranslate"><span class="pre">brainglobe-utils</span></code> as a name will automatically cause <code class="docutils literal notranslate"><span class="pre">brainglobe_utils</span></code> and <code class="docutils literal notranslate"><span class="pre">brainglobe</span> <span class="pre">utils</span></code> to be alternative names that the repository can be referred to by, for example.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">brainglobe</span></code> prefix can be dropped from the name automatically. <code class="docutils literal notranslate"><span class="pre">brainglobe-utils</span></code> being provided as the repository name will mean that the repository can also be referred to as <code class="docutils literal notranslate"><span class="pre">utils</span></code>, for example.</p></li>
</ul>
<p>To illustrate,</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">brainglobe_utils</span> <span class="o">=</span> <span class="n">Repository</span><span class="p">(</span>
    <span class="s2">&quot;brainglobe_utils&quot;</span><span class="p">,</span>
    <span class="p">[</span>
        <span class="s2">&quot;utilities&quot;</span><span class="p">,</span>
    <span class="p">],</span>
<span class="p">)</span>
</pre></div>
</div>
<p>creates a <code class="docutils literal notranslate"><span class="pre">Repository</span></code> object which, if the user asks <code class="docutils literal notranslate"><span class="pre">cite-brainglobe</span></code> to cite any one of <code class="docutils literal notranslate"><span class="pre">&quot;brainglobe-utils&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;brainglobe_utils&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;brainglobe</span> <span class="pre">utils&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;utils&quot;</span></code>, or <code class="docutils literal notranslate"><span class="pre">&quot;utilities&quot;</span></code>, the program will recognise as the <code class="docutils literal notranslate"><span class="pre">brainglobe-utils</span></code> package.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">all_citable_repositories</span></code> function is intended for imports in other areas of the <code class="docutils literal notranslate"><span class="pre">citation</span></code> submodule — it automatically detects the static <code class="docutils literal notranslate"><span class="pre">Repository</span></code> instances that we define in the <code class="docutils literal notranslate"><span class="pre">repositories</span></code> and returns them as a set.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">unique_repositories_from_tools</span></code> function takes in a list of tool names or aliases (in particular, the list provided by the user on the command-line) and returns the unique repositories that need to be cited given this list.</p>
</section>
<section id="citation-fetch">
<h3><code class="docutils literal notranslate"><span class="pre">citation.fetch</span></code><a class="headerlink" href="#citation-fetch" title="Link to this heading">#</a></h3>
<p>This submodule contains two helper functions.
The simplest is the <code class="docutils literal notranslate"><span class="pre">yaml_str_to_dict</span></code> function which takes a string containing the yaml-formatted content of a file and parses it into a Python <code class="docutils literal notranslate"><span class="pre">dict</span></code> — this is for use when retrieving files from the internet as opposed to loading them from disk.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">fetch_from_github</span></code> function provides a streamlined function for fetching the content of files from GitHub repositories, and validates that the request was successful.</p>
</section>
<section id="citation-format-and-the-citation-fmt-submodules">
<h3><code class="docutils literal notranslate"><span class="pre">citation.format</span></code> and the <code class="docutils literal notranslate"><span class="pre">citation.*_fmt</span></code> submodules<a class="headerlink" href="#citation-format-and-the-citation-fmt-submodules" title="Link to this heading">#</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">Format</span></code> class resides in this submodule.
This class is the intended base class for any citations that we want to generate, and provides this abstract functionality.
The various <code class="docutils literal notranslate"><span class="pre">*_fmt</span></code> submodules then provide the derived classes for each of the citation formats that we want to support - <code class="docutils literal notranslate"><span class="pre">bibtex_fmt</span></code> provides the <code class="docutils literal notranslate"><span class="pre">BibTexEntry</span></code> class, and <code class="docutils literal notranslate"><span class="pre">text_fmt</span></code> supports writing citations as human-readable strings.</p>
<p>The key properties of the <code class="docutils literal notranslate"><span class="pre">Format</span></code> class are the <code class="docutils literal notranslate"><span class="pre">required</span></code> and <code class="docutils literal notranslate"><span class="pre">optional</span></code> class variables - these are not set in the base class and are intended to be overwritten by classes that inherit from <code class="docutils literal notranslate"><span class="pre">Format</span></code>.
Both of these class variables should be lists of strings, corresponding to the keys in a <code class="docutils literal notranslate"><span class="pre">CITATION.cff</span></code> format that the citation (described by the inheriting class) needs (respectively can make use of) when being produced.
Existence of these keys in the CITATION.cff information is checked for in the <code class="docutils literal notranslate"><span class="pre">Format.__init__</span></code> class constructor to avoid repetition across submodules and catch errors.
Optional keys are allowed to be missing - these can be set to be reported if so.
The <code class="docutils literal notranslate"><span class="pre">Format</span></code> class also contains a class-wide function for parsing the <code class="docutils literal notranslate"><span class="pre">authors</span></code> key information into a string, <code class="docutils literal notranslate"><span class="pre">Format._prepare_authors_field</span></code> - which is again invoked on instantiation.
Finally, <code class="docutils literal notranslate"><span class="pre">Format</span></code> provides a placeholder <code class="docutils literal notranslate"><span class="pre">generate_ref_string</span></code> function that should be overwritten by any inheriting classes — this is the method that will parse the data read in and produce the citation string.</p>
<p>For example, the <code class="docutils literal notranslate"><span class="pre">TextCitation</span></code> format inherits from <code class="docutils literal notranslate"><span class="pre">Format</span></code> and requires the keys “author”, “title” and “year” to produce a reference.
It also provides a list of optional keys that the format can still make use of when producing the citation, but it does not require them.
<code class="docutils literal notranslate"><span class="pre">TextCitation</span></code> itself does not need to define a constructor function since the inherited constructor from <code class="docutils literal notranslate"><span class="pre">Format</span></code> now suffices with the overwritten values for <code class="docutils literal notranslate"><span class="pre">TextCitation.required</span></code> and <code class="docutils literal notranslate"><span class="pre">TextCitation.optional</span></code>.
<code class="docutils literal notranslate"><span class="pre">TextCitation</span></code> does implement <code class="docutils literal notranslate"><span class="pre">generate_ref_string</span></code> in order to overwrite the placeholder function defined by <code class="docutils literal notranslate"><span class="pre">Format</span></code> — this will dictate how the citation string is formatted and assembled.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">BibTexEntry</span></code> class is slightly more subtle since any given entry type in a bibtex file may require different keys present, <em>and</em> the syntax for the author field in a bibtex reference differs from the default format implemented in the <code class="docutils literal notranslate"><span class="pre">Format._prepare_authors_field</span></code>.
As such, <code class="docutils literal notranslate"><span class="pre">BibTexEntry</span></code> overwrites both the <code class="docutils literal notranslate"><span class="pre">_prepare_authors_field</span></code> function, <em>and</em> implements some preliminary steps in <code class="docutils literal notranslate"><span class="pre">BibTexEntry.__init__</span></code> before invoking the base constructor in <code class="docutils literal notranslate"><span class="pre">Format.__init__</span></code>.
<code class="docutils literal notranslate"><span class="pre">BibTexEntry</span></code> <em>does</em> however implement the <code class="docutils literal notranslate"><span class="pre">generate_ref_string</span></code> method, since this is the same for all bibtex citation types.
Each bibtex citation type, such as <code class="docutils literal notranslate"><span class="pre">Software</span></code> or <code class="docutils literal notranslate"><span class="pre">Article</span></code>, then inherits from the <code class="docutils literal notranslate"><span class="pre">BibTexEntry</span></code> class and defines the <code class="docutils literal notranslate"><span class="pre">required</span></code> and <code class="docutils literal notranslate"><span class="pre">optional</span></code> fields as usual.</p>
</section>
</section>
</section>

<div class="section ablog__blog_comments">
   
</div>

                </article>
              
              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="../brainglobe-meta/index.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">brainglobe-meta</p>
      </div>
    </a>
    <a class="right-next"
       href="../brainglobe-workflows/index.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">brainglobe-workflows</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#cite-brainglobe-and-the-citation-submodule"><code class="docutils literal notranslate"><span class="pre">cite-brainglobe</span></code> and the <code class="docutils literal notranslate"><span class="pre">citation</span></code> submodule</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#adding-new-repositories-or-tools">Adding new repositories or tools</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#adding-a-new-supported-citation-format">Adding a new supported citation format</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#citation-repositories"><code class="docutils literal notranslate"><span class="pre">citation.repositories</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#citation-fetch"><code class="docutils literal notranslate"><span class="pre">citation.fetch</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#citation-format-and-the-citation-fmt-submodules"><code class="docutils literal notranslate"><span class="pre">citation.format</span></code> and the <code class="docutils literal notranslate"><span class="pre">citation.*_fmt</span></code> submodules</a></li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../../../../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="../../../../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item"><p class="sphinx-version">
Created using <a href="https://sphinx-doc.org/">Sphinx</a> 8.2.1.
<br/>
</p>
<p class="theme-version">
Built with the
<a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a>
0.16.1.
</p></div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item"><div class="things-in-a-row">
</div></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>